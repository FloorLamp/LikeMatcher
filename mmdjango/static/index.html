{% extends "base.html" %}

{% block topbar %}
<div>
    <h1 id="welcome">Welcome, <strong>{{me.name}}</strong></h1>
    {% if not haveMusic %}
    <p>You don't have any music likes! You should like some artists for personalized recommendations.</p>
    {% endif %}
    <p id="noScript">You do not have Javascript enabled. Some features cannot be used without Javascript.</p>
</div>
{% endblock %}

{% block content %}
<div class="main">
    <h1 id="recommended">Recommended music</h1>
    <form action="/" method="POST" id="refreshForm">
        <input type="submit" name="refresh" value="Refresh" id="refreshDataLink" class="link" title="Re-search facebook for music data"></input>
    </form>
    <ul id="recommendedList">
        {% for artist in recommendedList %}
        <li>
            <div class="artistBox">
			    <a class="artistLink" href="{{artist.1.3}}">
				    <img class="artistPic" src="{{artist.1.2}}">
				    <div class="artistName link">
					    {{artist.0}}
				    </div>
			    </a>
		    </div>
        </li>
        {% endfor %}
    </ul>
    <ul id="resultsList"></ul>
</div>

<div class="artistSearch">
    <h2>Search your friends for similar artists</h2>
    <div id="artistSearchDiv" class="search">
        <div class="searchBar">
            <input type="text" id="artistSearchText" class="searchText"></input>
            <input type="button" id="artistSearchButton" class="searchButton"></input>
        </div>
    </div>
    <div id="artistSearchResults" class="results"></div>
</div>

<div class="friends">
    <h1 class="friendsTitle">Top common music</h1>
    <ul id="friendsList">
        {% for f in friendsList %}
        <li class="{% if f.1.2 == 0 or f.1.2 == None %} hidden {% endif %}">
            <div class="friendBox">
			    <img class="friendPic" src="{{f.1.1}}">
			    <div class="friendText">
			        <b class="friendName">
				        {{f.1.0}} ({{f.1.2}})
			        </b>
			        <br>
                    <input type="button" class="showCommonButton link" data-id="{{f.0}}" value="See common music"></input>
                    <input type="button" class="recButton link" data-id="{{f.0}}" value="Recommend music"></input>
                </div>
		    </div>
		    <div class="friendCommon">
		        <ul>
		            {% for a in f.1.3 %}
		            <li>
		                {{a}}
	                </li>
		            {% endfor %}
		        </ul>
		    </div>
        </li>
        {% endfor %}
    </ul>
    <div id="showAllFriends" class="link">
        Show all friends
    </div>
</div>
{% endblock%}
